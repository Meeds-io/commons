<?xml version="1.0" encoding="ISO-8859-1"?>
<configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.exoplatform.org/xml/ns/kernel_1_2.xsd http://www.exoplatform.org/xml/ns/kernel_1_2.xsd"
               xmlns="http://www.exoplatform.org/xml/ns/kernel_1_2.xsd">

    <component>
        <type>org.exoplatform.services.rest.impl.ResourceBinder</type>
    </component>

    <component>
        <key>org.exoplatform.services.scheduler.QueueTasks</key>
        <type>org.exoplatform.services.scheduler.QueueTasks</type>
    </component>

    <component>
      <key>org.exoplatform.services.organization.OrganizationService</key>
      <type>org.exoplatform.settings.impl.MockOrganizationService</type>
    </component>

    <component>
        <type>org.exoplatform.services.scheduler.impl.QuartzSheduler</type>
    </component>

    <component>
        <key>org.exoplatform.services.scheduler.JobSchedulerService</key>
        <type>org.exoplatform.services.scheduler.impl.JobSchedulerServiceImpl</type>
    </component>

    <component>
        <key>org.exoplatform.commons.api.event.EventManager</key>
        <type>org.exoplatform.commons.event.impl.EventManagerImpl</type>
    </component>

    <component>
        <key>org.exoplatform.settings.impl.SettingServiceImpl</key>
        <type>org.exoplatform.settings.impl.SettingServiceImpl</type>
    </component>

    <component>
        <type>org.exoplatform.commons.notification.cache.TemplateCaching</type>
    </component>

    <component>
        <key>org.exoplatform.services.resources.LocaleConfigService</key>
        <type>org.exoplatform.services.resources.impl.LocaleConfigServiceImpl</type>
        <init-params>
            <value-param>
                <name>locale.config.file</name>
                <value>jar:/conf/portal/locales-config.xml</value>
            </value-param>
        </init-params>
    </component>

    <component>
        <key>org.exoplatform.services.resources.LocalePolicy</key>
        <type>org.exoplatform.portal.application.localization.DefaultLocalePolicyService</type>
    </component>

    <component>
        <key>org.exoplatform.services.resources.ResourceBundleManager</key>
        <type>org.exoplatform.services.resources.ResourceBundleManager</type>
    </component>

    <component>
      <key>org.exoplatform.services.mail.MailService</key>
      <type>org.exoplatform.commons.testing.mock.MockMailService</type>
    </component>

    <component>
        <key>org.exoplatform.services.resources.ResourceBundleService</key>
        <type>org.exoplatform.services.resources.impl.SimpleResourceBundleService</type>
        <init-params>
            <values-param>
                <name>classpath.resources</name>
                <description>The resources that start with the following package name should be load from file system</description>
                <value>locale.portlet</value>
            </values-param>
            <values-param>
                <name>init.resources</name>
                <description>Initiate the following resources during the first launch</description>
                <value>locale.portal.expression</value>
            </values-param>
            <values-param>
                <name>portal.resource.names</name>
                <description>The properties files of the portal , those file will be merged into one ResoruceBundle properties
                </description>
                <value>locale.portal.expression</value>
            </values-param>
        </init-params>
    </component>

    <component>
        <key>org.exoplatform.services.cache.CacheService</key>
        <jmx-name>cache:type=CacheService</jmx-name>
        <type>org.exoplatform.services.cache.impl.CacheServiceImpl</type>
        <init-params>
            <object-param>
                <name>cache.config.default</name>
                <object type="org.exoplatform.services.cache.ExoCacheConfig">
                    <field name="name">
                        <string>default</string>
                    </field>
                    <field name="maxSize">
                        <int>30000</int>
                    </field>
                    <field name="liveTime">
                        <long>60000</long>
                    </field>
                    <field name="implementation">
                        <string>org.exoplatform.services.cache.concurrent.ConcurrentFIFOExoCache</string>
                    </field>
                </object>
            </object-param>
        </init-params>
    </component>

    <component>
        <key>org.exoplatform.commons.api.settings.SettingService</key>
        <type>org.exoplatform.settings.cache.CacheSettingServiceImpl</type>
    </component>

    <component>
        <key>org.exoplatform.commons.embedder.OembedEmbedder</key>
        <type>org.exoplatform.commons.embedder.OembedEmbedder</type>
        <init-params>
            <value-param>
                <name>http(s)?://(www\.dailymotion\.com\/(embed\/)?video|dai\.ly)/.*</name>
                <value>//www.dailymotion.com/services/oembed?format=json&amp;url=%s&amp;maxwidth=330&amp;maxheight=200</value>
            </value-param>
            <value-param>
                <name>http(s)?://(player.)?vimeo\.com/.*</name>
                <value>//vimeo.com/api/oembed.json?url=%s&amp;maxwidth=330&amp;maxheight=200</value>
            </value-param>
            <value-param>
                <name>https?://www\.slideshare\.net/.*/.*</name>
                <value>https://www.slideshare.net/api/oembed/2?url=%s&amp;format=json&amp;maxwidth=330&amp;maxheight=200</value>
            </value-param>
            <value-param>
                <name>https?://www\.flickr\.com/photos/.*</name>
                <value>https://www.flickr.com/services/oembed/?format=json&amp;url=%s</value>
            </value-param>
        </init-params>
    </component>

    <component>
        <key>org.exoplatform.commons.embedder.YoutubeEmbedder</key>
        <type>org.exoplatform.commons.embedder.YoutubeEmbedder</type>
        <init-params>
            <value-param>
                <name>(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$</name>
                <value>https://www.googleapis.com/youtube/v3/videos?key=%s&amp;part=snippet&amp;id=%s</value>
            </value-param>
        </init-params>
    </component>
</configuration>
